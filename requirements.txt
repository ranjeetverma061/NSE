<!doctype html>
<html lang="en" data-theme="blue">
<head>
  <meta charset="utf-8">
  <title>Collateral Policies Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* ---------- RESET ---------- */
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{font-family:'Inter',sans-serif;line-height:1.6;color:var(--text);background:var(--bg);-webkit-font-smoothing:antialiased}

    /* ---------- THEME TOKENS ---------- */
    :root{
      --brand:#006ca7;
      --brand-dark:#005a8c;
      --brand-light:#e1f0fa;
      --accent:#17a2b8;
      --success:#28a745;
      --warning:#ffc107;
      --error:#dc3545;
      --text:#2d3748;
      --text-soft:#4a5568;
      --bg:#ffffff;
      --bg-soft:#f8f9fa;
      --border:#e0e0e0;
      --border-radius:8px;
      --shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);
      --transition:all .25s cubic-bezier(.4,0,.2,1);
    }
    [data-theme="green"]{
      --brand:#2e7d32;
      --brand-dark:#1b5e20;
      --brand-light:#e8f5e9;
      --accent:#43a047;
    }
    [data-theme="purple"]{
      --brand:#6a1b9a;
      --brand-dark:#4a148c;
      --brand-light:#f3e5f5;
      --accent:#9c27b0;
    }
    [data-theme="dark"]{
      --text:#e2e8f0;
      --text-soft:#a0aec0;
      --bg:#1a202c;
      --bg-soft:#2d3748;
      --border:#4a5568;
    }

    /* ---------- HEADER ---------- */
    .header{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;background:linear-gradient(135deg,var(--brand),var(--brand-dark));color:#fff;position:sticky;top:0;z-index:1000;box-shadow:var(--shadow)}
    .header__title{display:flex;align-items:center;gap:.5rem;font-weight:600;font-size:1.125rem}
    .header__nav{display:flex;align-items:center;gap:.75rem}
    .btn--ghost{background:transparent;border:1px solid rgba(255,255,255,.3);color:#fff;border-radius:20px;padding:.5rem .75rem;font-size:.875rem;transition:var(--transition)}
    .btn--ghost:hover{background:rgba(255,255,255,.15)}
    .theme-switch{position:relative}
    .theme-switch__btn{background:transparent;border:none;color:#fff;font-size:1rem;cursor:pointer}
    .theme-switch__menu{position:absolute;right:0;top:2.5rem;background:var(--bg);color:var(--text);border-radius:var(--border-radius);box-shadow:var(--shadow);padding:.5rem 0;display:none;min-width:120px;z-index:1001}
    .theme-switch__menu--open{display:block}
    .theme-switch__item{padding:.5rem 1rem;cursor:pointer;font-size:.875rem}
    .theme-switch__item:hover{background:var(--brand-light)}
    .mobile-menu{display:none;background:transparent;border:none;color:#fff;font-size:1.25rem}

    /* ---------- SIDEBAR ---------- */
    .sidebar{width:260px;height:100vh;position:fixed;top:0;left:0;background:var(--bg-soft);border-right:1px solid var(--border);display:flex;flex-direction:column;transition:var(--transition);z-index:999}
    .sidebar__head{padding:1rem;font-weight:600;border-bottom:1px solid var(--border)}
    .sidebar__body{flex:1;overflow-y:auto;padding:.5rem 0}
    .sidebar__foot{padding:.75rem 1rem;border-top:1px solid var(--border);font-size:.75rem;color:var(--text-soft)}
    .nav__section{margin-bottom:1rem}
    .nav__title{display:flex;align-items:center;gap:.5rem;font-weight:600;font-size:.875rem;padding:.5rem .75rem;cursor:pointer;color:var(--text-soft)}
    .nav__title[aria-expanded="true"] i{transform:rotate(90deg)}
    .nav__list{max-height:0;overflow:hidden;transition:max-height .3s}
    .nav__list--open{max-height:1000px}
    .nav__item{display:block;padding:.5rem .75rem .5rem 1.5rem;font-size:.875rem;cursor:pointer;color:var(--text-soft)}
    .nav__item:hover,.nav__item--active{color:var(--brand);background:var(--brand-light)}
    .sidebar--closed{transform:translateX(-100%)}
    .toggle-sidebar{position:fixed;top:4.5rem;left:270px;z-index:1001;background:var(--brand);color:#fff;border:none;border-radius:50%;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;transition:var(--transition)}
    .toggle-sidebar:hover{background:var(--brand-dark)}

    /* ---------- MAIN ---------- */
    .main{margin-left:260px;padding:1rem;transition:var(--transition)}
    .main--full{margin-left:0}
    .filters{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1.5rem}
    .filters__group{flex:1 1 200px;display:flex;flex-direction:column}
    .filters__label{font-weight:600;font-size:.875rem;margin-bottom:.25rem}
    .filters__input,.filters__select{padding:.5rem;border:1px solid var(--border);border-radius:var(--border-radius);font-size:.875rem}
    .filters__input:focus,.filters__select:focus{outline:none;border-color:var(--brand);box-shadow:0 0 0 2px rgba(0,108,167,.2)}
    .card{background:var(--bg);border:1px solid var(--border);border-radius:var(--border-radius);padding:1rem;box-shadow:var(--shadow);transition:var(--transition)}
    .card:hover{transform:translateY(-3px);box-shadow:0 4px 6px rgba(0,0,0,.1)}
    .card__title{font-weight:600;color:var(--brand);margin-bottom:.5rem;font-size:1rem}
    .card__text{color:var(--text-soft);margin-bottom:1rem;font-size:.875rem}
    .card__foot{display:flex;justify-content:flex-end}
    .btn{display:inline-flex;align-items:center;gap:.5rem;background:var(--brand);color:#fff;border:none;border-radius:var(--border-radius);padding:.5rem .75rem;font-size:.875rem;cursor:pointer;transition:var(--transition)}
    .btn:hover{background:var(--brand-dark)}

    /* ---------- ACCORDION ---------- */
    .accordion{background:var(--bg);border:1px solid var(--border);border-radius:var(--border-radius);overflow:hidden;margin-bottom:1rem}
    .accordion__btn{width:100%;text-align:left;background:var(--brand-light);border:none;padding:.75rem 1rem;font-weight:600;font-size:.875rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
    .accordion__btn::after{content:'\f078';font-family:'Font Awesome 6 Free';font-weight:900;transition:var(--transition)}
    .accordion__btn[aria-expanded="true"]::after{transform:rotate(180deg)}
    .accordion__panel{max-height:0;overflow:hidden;transition:max-height .3s}
    .accordion__panel--open{max-height:1000px}
    .accordion__list{list-style:none;padding:1rem;margin:0}
    .accordion__item{display:flex;align-items:flex-start;gap:.5rem;padding:.5rem 0;font-size:.875rem}
    .accordion__item i{color:var(--brand);margin-top:.15rem}
    .badge{font-size:.75rem;padding:.15rem .5rem;border-radius:12px;margin-left:.5rem}
    .badge--required{background:#fff3cd;color:#856404}
    .badge--optional{background:#d4edda;color:#155724}
    .badge--conditional{background:#d1ecf1;color:#0c5460}
    .deviation-table{width:100%;border-collapse:collapse;margin:1rem 0;font-size:.875rem}
    .deviation-table th,.deviation-table td{padding:.5rem .75rem;border:1px solid var(--border)}
    .deviation-table th{background:var(--bg-soft);font-weight:600;text-align:left}
    .deviation-table tr:nth-child(even){background:var(--bg-soft)}

    /* ---------- RESPONSIVE ---------- */
    @media (max-width:768px){
      .sidebar{transform:translateX(-100%)}
      .sidebar--open{transform:translateX(0)}
      .mobile-menu{display:block}
      .main{margin-left:0}
      .toggle-sidebar{display:none}
    }
    @media (max-width:480px){
      .header__nav{display:none}
    }

    /* ---------- PRINT ---------- */
    @media print{
      .header,.sidebar,.toggle-sidebar,.mobile-menu{display:none!important}
      .main{margin-left:0!important;padding:0!important}
      .accordion__panel{max-height:none!important}
    }
  </style>
</head>

<body>
  <!-- HEADER -->
  <header class="header">
    <div class="header__title">
      <i class="fas fa-file-alt" aria-hidden="true"></i>
      <span>Collateral Policies</span>
    </div>

    <nav class="header__nav" aria-label="Primary">
      <button class="btn--ghost" type="button" onclick="resetAll()"><i class="fas fa-undo"></i> Reset</button>
      <a class="btn--ghost" href="#"><i class="fas fa-home"></i> Home</a>
      <a class="btn--ghost" href="#"><i class="fas fa-book"></i> Docs</a>

      <div class="theme-switch">
        <button class="theme-switch__btn" type="button" aria-label="Themes" aria-expanded="false" aria-controls="themeMenu">
          <i class="fas fa-palette"></i>
        </button>
        <ul class="theme-switch__menu" id="themeMenu" role="menu">
          <li class="theme-switch__item" role="menuitem" tabindex="0" data-theme="blue">Blue</li>
          <li class="theme-switch__item" role="menuitem" tabindex="0" data-theme="green">Green</li>
          <li class="theme-switch__item" role="menuitem" tabindex="0" data-theme="purple">Purple</li>
          <li class="theme-switch__item" role="menuitem" tabindex="0" data-theme="dark">Dark</li>
        </ul>
      </div>
    </nav>

    <button class="mobile-menu" type="button" aria-label="Menu" aria-controls="sidebar">
      <i class="fas fa-bars"></i>
    </button>
  </header>

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar" aria-labelledby="navTitle">
    <div class="sidebar__head" id="navTitle">Navigation</div>
    <nav class="sidebar__body" id="navBody" aria-label="Sidebar"></nav>
    <div class="sidebar__foot">v2.2.0 • 2025</div>
  </aside>

  <button class="toggle-sidebar" type="button" aria-label="Toggle sidebar" aria-controls="sidebar">
    <i class="fas fa-chevron-left" aria-hidden="true"></i>
  </button>

  <!-- MAIN -->
  <main class="main" id="main">
    <!-- Welcome card -->
    <section id="welcome" class="card">
      <h2 class="card__title">Welcome to Collateral Policies Portal</h2>
      <p class="card__text">Select your category and region from the sidebar to begin.</p>
      <div class="card__foot">
        <button class="btn" onclick="resetAll()">Start</button>
      </div>
    </section>

    <!-- Filters -->
    <section id="filters" class="filters" hidden>
      <div class="filters__group">
        <label class="filters__label" for="regionSelect">Region</label>
        <select id="regionSelect" class="filters__select"></select>
      </div>
      <div class="filters__group">
        <label class="filters__label" for="propertySelect">Property Type</label>
        <select id="propertySelect" class="filters__select"></select>
      </div>
      <div class="filters__group">
        <label class="filters__label" for="caseSelect">Case Type</label>
        <select id="caseSelect" class="filters__select"></select>
      </div>
      <div class="filters__group">
        <label class="filters__label" for="searchInput">Search</label>
        <input id="searchInput" class="filters__input" type="search" placeholder="Keywords…">
      </div>
      <button class="btn" type="button" onclick="window.print()"><i class="fas fa-print"></i> Print</button>
    </section>

    <!-- Results -->
    <section id="results" aria-live="polite"></section>
  </main>

  <script>
    /* ---------- ORIGINAL DATA ---------- */
    const locationData = {
      "Legal": {
        "North": {
          "Uttar Pradesh": { "Uttar Pradesh Legal Cluster": {} },
          "Uttarakhand": { "Uttarakhand Legal Cluster": {} },
          "Rajasthan": { "Rajasthan Legal Cluster": {} },
          "Delhi": {
            "Delhi-1 Legal Cluster": {}, "Delhi-2 Legal Cluster": {}, "Delhi-3 Legal Cluster": {}, "Delhi-4 Legal Cluster": {}
          },
          "Haryana": { "Haryana Legal Cluster": {} },
          "Punjab": { "Punjab Legal Cluster": {} }
        },
        "West": {
          "Gujarat": { "Gujarat Legal Cluster": {} },
          "Maharashtra": {
            "Aurangabad Legal Cluster": {}, "Nagpur Legal Cluster": {}, "Pune Legal Cluster": {},
            "Nashik Legal Cluster": {}, "Mumbai            "Legal Cluster": {}
          },
          "Madhya Pradesh": { "Madhya Pradesh Legal Cluster": {} }
        },
        "South": {
          "Andhra Pradesh": { "Andhra Pradesh Legal Cluster": {} },
          "Tamil Nadu": { "Tamil Nadu Legal Cluster": {} },
          "Telangana": { "Telangana Legal Cluster": {} }
        }
      },
      "Technical": {
        "North": {
          "Uttar Pradesh": { "Uttar Pradesh Tech Cluster": {} },
          "Uttarakhand": { "Uttarakhand Tech Cluster": {} },
          "Rajasthan": { "Rajasthan Tech Cluster": {} },
          "Delhi": {
            "Delhi-1 Tech Cluster": {}, "Delhi-2 Tech Cluster": {}, "Delhi-3 Tech Cluster": {}, "Delhi-4 Tech Cluster": {}
          },
          "Haryana": { "Haryana Tech Cluster": {} },
          "Punjab": { "Punjab Tech Cluster": {} }
        },
        "West": {
          "Gujarat": { "Gujarat Tech Cluster": {} },
          "Maharashtra": {
            "Aurangabad Tech Cluster": {}, "Nagpur Tech Cluster": {}, "Pune Tech Cluster": {},
            "Nashik Tech Cluster": {}, "Mumbai Tech Cluster": {}
          },
          "Madhya Pradesh": { "Madhya Pradesh Tech Cluster": {} }
        },
        "South": {
          "Andhra Pradesh": { "Andhra Pradesh Tech Cluster": {} },
          "Tamil Nadu": { "Tamil Nadu Tech Cluster": {} },
          "Telangana": { "Telangana Tech Cluster": {} }
        }
      }
    };

    const docStructure = {
      "Pune Legal Cluster": {
        "Residencial Zone Property": {
          "LAP/Self-Construction": [
            { text: "1. Registered Title Deed of Borrower", status: "required" },
            { text: "2. 7/12 Extract / Namuna / Mutation Entries / Revenue Record in the name of Borrower", status: "required" },
            { text: "3. PTR/ E Bill (not required if 13 years chain deeds available)", status: "conditional" },
            { text: "4. Previous Title chain Deeds", status: "required" },
            { text: "5. Zone Certificate", status: "required" },
            { text: "6. Society Registration Certificate (if any) / Deed of Declaration", status: "conditional" },
            { text: "7. ADDITIONAL CLARIFICATION / DOCUMENTS / NOTE ARE BELOW MENTIONED:", status: "optional" },
            { text: "8. Current Order / Exh. 1 Plaint in case of Litigation is pending and/or dispossed off", status: "conditional" },
            { text: "9. Court permission in case of Minor property Involved", status: "conditional" },
            { text: "10. In case if death of property owner - Death Certificate of property owner / Legal heirs affidavit of death person", status: "conditional" },
            { text: "11. Share Certificate in case of Society is formed", status: "conditional" },
            { text: "12. Deed of Apartment in favor of Current Owner in case of Apartment Condominium formed / registered Deed of Declaration", status: "conditional" }
          ],
          "Shubh Vikas": [
            { text: "1. Registered Title Deed of Borrower", status: "required" },
            { text: "2. 7/12 Extract / Namuna / Revenue Record for last 5 years", status: "required" },
            { text: "3. PTR/ E Bill", status: "required" },
            { text: "4. Previous Title chain Deeds within 5 years", status: "required" },
            { text: "5. Zone Certificate", status: "required" },
            { text: "6. Death Certificate of property owner / Legal heirs affidavit of death person", status: "conditional" },
            { text: "7. ADDITIONAL CLARIFICATION / DOCUMENTS / NOTE ARE BELOW MENTIONED:", status: "optional" },
            { text: "8. Current Order / Exh. 1 Plaint in case of Litigation is pending and/or dispossed off", status: "conditional" },
            { text: "9. Court permission in case of Minor property Involved", status: "conditional" },
            { text: "10. In case if death of property owner - Death Certificate of property owner / Legal heirs affidavit of death person", status: "conditional" },
            { text: "11. Share Certificate in case of Society is formed", status: "conditional" },
            { text: "12. Deed of Apartment in favor of Current Owner in case of Apartment Condominium formed / registered Deed of Declaration", status: "conditional" }
          ]
        }
      },
      "Uttar Pradesh Tech Cluster": {
        "Industrial Property": {
          "Factory Setup": [
            { text: "1. Land Survey Report", status: "required" },
            { text: "2. Structural Stability Certificate", status: "required" },
            { text: "3. Environmental Clearance", status: "required" },
            { text: "4. Factory Layout Plan", status: "required" }
          ]
        }
      }
    };

    const secondaryDocStructure = {
      "Pune Legal Cluster": {
        "chain documents lost": {
          alternatives: [
            "Certified Copy of Deed",
            "Indemnity",
            "FIR",
            "Public Notice for lost of Deeds by Advocate",
            "NOC to Public Notice issued by Advocate",
            "RM to be done"
          ],
          approval: "ALM / RLM"
        },
        "Laminated Deed / Letters (not OK if title Deed of Borrower is laminated)": {
          alternatives: [ "Certified Copy of Deed which is laminated", "Indemnity" ],
          approval: "RLM/ NLM"
        }
      },
      "Uttar Pradesh Legal Cluster": {
        "Title Verification": { status: "Complete", notes: "Clear title verified", date: "2023-05-10" },
        "Encumbrance Check": { status: "Pending", notes: "Waiting for updated EC", date: "2023-05-15" }
      }
    };

    /* ---------- DOM SHORTCUTS ---------- */
    const sidebarBody = document.getElementById('navBody');
    const welcome   = document.getElementById('welcome');
    const filters   = document.getElementById('filters');
    const results   = document.getElementById('results');
    const regionSel = document.getElementById('regionSelect');
    const propertySel = document.getElementById('propertySelect');
    const caseSel   = document.getElementById('caseSelect');
    const searchInput = document.getElementById('searchInput');

    let currentCategory = '', currentState = '';

    /* ---------- SIDEBAR RENDER ---------- */
    function renderSidebar() {
      sidebarBody.innerHTML = '';
      for (const category in locationData) {
        const section = document.createElement('div');
        section.className = 'nav__section';

        const title = document.createElement('button');
        title.className = 'nav__title';
        title.innerHTML = `<i class="fas fa-chevron-right" aria-hidden="true"></i> ${category}`;
        title.setAttribute('aria-expanded', 'false');

        const list = document.createElement('ul');
        list.className = 'nav__list';

        for (const zone in locationData[category]) {
          for (const state in locationData[category][zone]) {
            const li = document.createElement('li');
            li.className = 'nav__item';
            li.textContent = state;
            li.onclick = () => selectState(category, state);
            list.appendChild(li);
          }
        }

        title.onclick = () => {
          const open = title.getAttribute('aria-expanded') === 'true';
          title.setAttribute('aria-expanded', !open);
          list.classList.toggle('nav__list--open');
        };

        section.appendChild(title);
        section.appendChild(list);
        sidebarBody.appendChild(section);
      }
    }

    /* ---------- STATE SELECTION ---------- */
    function selectState(category, state) {
      currentCategory = category;
      currentState = state;
      welcome.hidden = true;
      filters.hidden = false;
      results.innerHTML = '';

      regionSel.innerHTML = '<option value="">Select Region</option>';
      Object.keys(docStructure[state] || {}).forEach(type => {
        const opt = document.createElement('option');
        opt.value = type;
        opt.textContent = type;
        regionSel.appendChild(opt);
      });
      propertySel.innerHTML = '<option value="">Select Property Type</option>';
      caseSel.innerHTML   = '<option value="">Select Case Type</option>';
    }

    /* ---------- CHAINED SELECTS ---------- */
    regionSel.onchange = () => {
      const type = regionSel.value;
      propertySel.innerHTML = '<option value="">Select Property Type</option>';
      caseSel.innerHTML   = '<option value="">Select Case Type</option>';
      if (docStructure[currentState]?.[type]) {
        Object.keys(docStructure[currentState][type]).forEach(ct => {
          const opt = document.createElement('option');
          opt.value = ct;
          opt.textContent = ct;
          caseSel.appendChild(opt);
        });
      }
    };
    caseSel.onchange = loadDocs;
    searchInput.oninput = () => {
      const term = searchInput.value.toLowerCase();
      document.querySelectorAll('.accordion__item').forEach(li => {
        li.style.display = li.textContent.toLowerCase().includes(term) ? 'flex' : 'none';
      });
    };

    /* ---------- LOAD DOCUMENTS ---------- */
    function loadDocs() {
      const propertyType = regionSel.value;
      const caseType     = caseSel.value;

      results.innerHTML = '';
      if (!docStructure[currentState]?.[propertyType]?.[caseType]) {
        results.innerHTML = '<p style="color:var(--error)">No documents found.</p>';
        return;
      }

      const docs = docStructure[currentState][propertyType][caseType];

      /* primary accordion */
      const primaryDiv = document.createElement('div');
      primaryDiv.className = 'accordion';
      primaryDiv.innerHTML = `
        <button class="accordion__btn" aria-expanded="false">${currentState} → ${propertyType} → ${caseType}</button>
        <div class="accordion__panel">
          <ul class="accordion__list">
            ${docs.map(d => `
              <li class="accordion__item">
                <i class="fas fa-check-circle" aria-hidden="true"></i>
                ${d.text}
                ${d.status ? `<span class="badge badge--${d.status}">${d.status}</span>` : ''}
              </li>
            `).join('')}
          </ul>
        </div>
      `;
      results.appendChild(primaryDiv);

      /* deviations table */
      if (secondaryDocStructure[currentState]) {
        const secDiv = document.createElement('div');
        secDiv.className = 'accordion';
        let secHTML = `
          <button class="accordion__btn" aria-expanded="false">${currentState} Deviations</button>
          <div class="accordion__panel">
            <table class="deviation-table">
              <thead>
                <tr><th>Deviation</th><th>Alternatives / Status</th><th>Approval</th></tr>
              </thead>
              <tbody>`;
        for (const [dev, obj] of Object.entries(secondaryDocStructure[currentState])) {
          if (obj.alternatives) {
            obj.alternatives.forEach((alt, i) => {
              secHTML += `<tr>
                ${i === 0 ? `<td rowspan="${obj.alternatives.length}">${dev}</td>` : ''}
                <td>${alt}</td>
                ${i === 0 ? `<td rowspan="${obj.alternatives.length}">${obj.approval}</td>` : ''}
              </tr>`;
            });
          } else {
            secHTML += `<tr>
              <td>${dev}</td>
              <td>${obj.status}</td>
              <td>${obj.notes}</td>
            </tr>`;
          }
        }
        secHTML += `</tbody></table></div>`;
        secDiv.innerHTML = secHTML;
        results.appendChild(secDiv);
      }

      /* accordion behaviour */
      results.querySelectorAll('.accordion__btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const open = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', !open);
          btn.nextElementSibling.classList.toggle('accordion__panel--open');
        });
      });
    }

    /* ---------- RESET ---------- */
    function resetAll() {
      welcome.hidden = false;
      filters.hidden  = true;
      results.innerHTML = '';
      regionSel.innerHTML   = '<option value="">Select Region</option>';
      propertySel.innerHTML = '<option value="">Select Property Type</option>';
      caseSel.innerHTML     = '<option value="">Select Case Type</option>';
      searchInput.value = '';
      document.querySelectorAll('.nav__item').forEach(n => n.classList.remove('nav__item--active'));
    }

    /* ---------- INIT ---------- */
    document.addEventListener('DOMContentLoaded', () => {
      renderSidebar();

      /* theme switch */
      const themeBtn = document.querySelector('.theme-switch__btn');
      const themeMenu = document.getElementById('themeMenu');
      themeBtn.addEventListener('click', () => {
        const open = themeBtn.getAttribute('aria-expanded') === 'true';
        themeBtn.setAttribute('aria-expanded', !open);
        themeMenu.classList.toggle('theme-switch__menu--open');
      });
      themeMenu.addEventListener('click', e => {
        if (e.target.dataset.theme) {
          document.documentElement.dataset.theme = e.target.dataset.theme;
          localStorage.setItem('theme', e.target.dataset.theme);
          themeBtn.setAttribute('aria-expanded', 'false');
          themeMenu.classList.remove('theme-switch__menu--open');
        }
      });

      /* saved theme */
      const saved = localStorage.getItem('theme');
      if (saved) document.documentElement.dataset.theme = saved;

      /* sidebar toggle */
      const toggleBtn = document.querySelector('.toggle-sidebar');
      const sidebar = document.getElementById('sidebar');
      const main = document.getElementById('main');
      toggleBtn.addEventListener('click', () => {
        sidebar.classList.toggle('sidebar--closed');
        main.classList.toggle('main--full');
      });

      /* mobile menu */
      const mobileBtn = document.querySelector('.mobile-menu');
      mobileBtn.addEventListener('click', () => sidebar.classList.toggle('sidebar--open'));
    });
  </script>
</body>
</html>